<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>节点信息</title>
    <style>
        /* 你的CSS样式 */
    </style>
</head>
<body>
    <div id="content">
        <h3>节点信息</h3>
        <div id="configBox" class="config-box"></div>
        <button class="copy-btn" onclick="copyToClipboard()">一键复制</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 请求后端节点信息
            fetch('/node')
                .then(response => response.json())
                .then(data => {
                    const configBox = document.getElementById('configBox');
                    if (data.configs && data.configs.length) {
                        data.configs.forEach(config => {
                            const configDiv = document.createElement('div');
                            configDiv.textContent = config.trim();
                            configBox.appendChild(configDiv);
                        });
                    } else {
                        configBox.textContent = '没有找到节点信息。';
                    }
                })
                .catch(error => {
                    const configBox = document.getElementById('configBox');
                    configBox.textContent = '无法加载节点信息。';
                    console.error('请求节点信息失败:', error);
                });
        });

        function copyToClipboard() {
            const element = document.getElementById("configBox");
            let text = Array.from(element.children)
                .map(child => child.textContent.trim())
                .join("\n");

            navigator.clipboard.writeText(text).then(() => {
                alert("已复制到剪贴板！");
            }).catch(() => {
                alert("复制失败，请手动复制！");
            });
        }
    </script>
</body>
</html>